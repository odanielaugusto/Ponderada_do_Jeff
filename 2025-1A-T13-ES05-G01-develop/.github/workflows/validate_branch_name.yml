name: Validar nome da branch

on:
  pull_request:
    branches:
      - "*"

jobs:
  check-branch-name:
    runs-on: ubuntu-latest

    steps:
      - name: Verificar nome da branch
        run: |
          BRANCH_NAME="${{ github.head_ref }}"
          echo "Nome da branch: $BRANCH_NAME"
          
          PATTERN="^(feature|bugfix|release|hotfix|docs|develop)/.*$"
          
          # Verifica se o nome cont√©m espa√ßos
          if [[ "$BRANCH_NAME" =~ \  ]]; then
            echo "üö® Nome da branch inv√°lido: '$BRANCH_NAME'. O nome da branch n√£o pode conter espa√ßos."
            exit 1
          fi

          # Verifica se o nome segue o padr√£o esperado
          if [[ ! "$BRANCH_NAME" =~ $PATTERN ]]; then
            echo "üö® Nome de branch inv√°lido: '$BRANCH_NAME'. O nome da branch deve seguir o padr√£o: [tipo]/[finalidade]/[nome-da-branch], onde [tipo] √© 'feature', 'bugfix', 'release', 'hotfix', 'docs' ou 'develop'."
            exit 1
          fi
